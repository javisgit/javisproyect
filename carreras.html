<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Juegooo</title>
    <img src="https://media.gettyimages.com/vectors/track-and-field-stadium-vector-id1174185059?s=612x612" 
    width="100%" height="500">
    <style>
      body {
        /* Rompe el flujo normal pasa poder hacer swipe hacia abajo. */
        position: fixed;
        top: 0px;
        left: 0px;
        /* ocupa todo el espacio. */
        width: 100%;
        height: 100%;
        /* Elimina m√°rgenes. */
        margin: 0;
        /* Evita el scroll */
        overflow: hidden;
      }
      .figura {
        position: absolute;
        display: block;
        font-size: 30px;
      }

        fantasma-web {
        position: absolute;
        font-size: 35px;
      

      }
    </style>
    <script>
      function desv√≠a(i) {
        return i + 10 - 15 * Math.random();
      }


      customElements.define("fantasma-web", class extends HTMLElement {
        connectedCallback() {
          this.x = 0;
          this.innerHTML =
           " ü•Ö &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ü•Ö &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ü•Ö &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ü•Ö  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br> <br>   ü•Ö &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ü•Ö &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ü•Ö &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ü•Ö <br> <br> ü•Ö &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ü•Ö &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ü•Ö &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ü•Ö <br> <br> ü•Ö &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ü•Ö &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ü•Ö &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ü•Ö<br><br>";
        }
        mu√©ve() {
          let y = 10;
          this.style.left = `${this.x}px`;
          this.style.top = `${y}px`;
          this.x = this.x > 500 ? 0 : this.x + 2;
        }
      });

      customElements.define("figura-corre", class extends HTMLElement {
        connectedCallback() {
          this.classList.add("figura")
          this.innerHTML = " üèÉ  ";
          this.style.fontSize = "45px";
        }
        mu√©vete(x, y) {
          this.style.right = `${desv√≠a(x)}px`;
          this.style.top = `${desv√≠a(y)}px`;
        }
      });

      customElements.define("figura-camara", class extends HTMLElement {
        connectedCallback() {
          this.classList.add("figura")
          this.innerHTML += "üé•";
          this.x = 10;
          this.y = 10;
        }
        sube() {
          this.y -= 20;
          this.mu√©vete()
        }
        baja() {
          this.y += 20;
          this.mu√©vete()
        }
        izquierda() {
          this.x -= 15;
          this.mu√©vete()
        }
        derecha() {
          this.x += 10;
          this.mu√©vete()
        }
        mu√©vete() {
          this.corredores = Array.from(document.querySelectorAll("figura-corre"));
          this.style.right = `${this.x}px`;
          this.style.top = `${this.y}px`;
          var incr = 40;
          for (const corres of this.corredores) {
            corres.mu√©vete(this.x + incr, this.y + incr);
            incr += 70;
          }
        }
      });
    </script>
  </head>
  
    
    <figura-camara id="camara"></figura-camara>
    <figura-corre></figura-corre>
    <figura-corre></figura-corre>
    <figura-corre></figura-corre>
    <fantasma-web id="web"></fantasma-web>
    <script>
      setInterval(() => web.mu√©ve(), 200);
            setInterval(() => web2.mu√©ve(), 200);
                  setInterval(() => web3.mu√©ve(), 200);
    </script>
      <p>Corre y llega a la meta :O </p>
    <footer>Copyright &copy; 2020 Jim√©nez P√©rez Javier</footer>

    
    <script>
           camara.mu√©vete();
      document.addEventListener("keydown", evt => {
        switch (evt.key) {
          case "ArrowLeft":
            camara.derecha();
            break;
          case "ArrowRight":
            camara.izquierda();
            break;
            case "ArrowUp":
            camara.sube();
            break;
          case "ArrowDown":
            camara.baja();
            break;
        }
      });
      let iniciaX = null;
      let iniciaY = null;
      document.addEventListener('touchstart', evt => {
        const toquInicial = evt.touches[0];
        iniciaX = toquInicial.clientX;
        iniciaY = toquInicial.clientY;
      });
      document.addEventListener('touchmove', evt => {
        if (iniciaX && iniciaY) {
          const mueve = evt.touches[0];
          var mueveX = mueve.clientX;
          var mueveY = mueve.clientY;
          var difX = mueveX - iniciaX;
          var difY = mueveY - iniciaY;
          // Checa que el movimiento no sea muy corto,
          if (Math.abs(difX) + Math.abs(difY) > 200) {
            if (Math.abs(difX) > Math.abs(difY)) {
              if (difX > 30) {
                camara.izquierda();
              } else {
                camara.derecha();
              }
            } else if (difY > 50) {
                camara.baja();
            } else {
                camara.sube();
            }
            // Reinicia valores.
            iniciaX = null;
            iniciaY = null;
          }
        }
      });
    </script>
  
  </body>
  
</html>
